(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[18],{1470:function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("q-page",[o("font",{staticClass:"text-bold",attrs:{size:"1",color:"grey"}},[t._v("MASTER DATA "),o("q-icon",{attrs:{name:"double_arrow"}}),t._v(" PRODUCT TYPE - SUB TYPE")],1),o("div",{staticStyle:{"margin-bottom":"30px","margin-top":"10px",width:"310px"},attrs:{align:"left"}},[o("font",{staticClass:"text-bold",staticStyle:{"margin-bottom":"10px"},attrs:{size:"5"}},[t._v("PRODUCT TYPE - SUB TYPE")]),o("div",{staticClass:"row"},[o("div",{staticClass:"col-20",staticStyle:{width:"32%"}},[o("q-separator",{attrs:{color:"orange-10"}}),o("q-separator",{attrs:{color:"orange-10"}})],1),o("div",{staticClass:"col"},[o("q-separator",{attrs:{color:"purple-10"}}),o("q-separator",{attrs:{color:"purple-10"}})],1)])],1),o("q-card",{staticStyle:{"max-width":"800px"}},[o("q-card-section",[o("q-expansion-item",{staticStyle:{"margin-bottom":"10px"},attrs:{label:"SEARCH","header-class":"bg-indigo-2 text-indigo-10",icon:"search"}},[o("div",{staticClass:"row bg-orange-1",staticStyle:{padding:"10px",width:"100%"},attrs:{align:"left"}},[o("div",{staticClass:"col-15",staticStyle:{"margin-right":"10px",width:"30%"}},[o("q-input",{staticClass:"searchform",attrs:{rounded:"",outlined:"","stack-label":"",label:"Product Type",color:"orange-8"},model:{value:t.searchVal.productType,callback:function(e){t.$set(t.searchVal,"productType",e)},expression:"searchVal.productType"}})],1),o("div",{staticClass:"col-15",staticStyle:{"margin-right":"10px",width:"25%"}},[o("q-select",{staticClass:"searchform",attrs:{rounded:"",outlined:"","stack-label":"",color:"orange-8",label:"Equipment Category",options:t.categorySearchList},model:{value:t.searchVal.category,callback:function(e){t.$set(t.searchVal,"category",e)},expression:"searchVal.category"}})],1),o("div",{staticClass:"col",staticStyle:{width:"5%"}},[o("q-btn",{attrs:{round:"",color:"indigo-10"},on:{click:function(e){return t.doSearchByFilter()}}},[o("q-icon",{attrs:{name:"search"}}),o("q-tooltip",[t._v("Search")])],1)],1)])]),o("q-table",{attrs:{data:t.dataList,columns:t.tableColumns,pagination:t.pagination,"table-header-class":"text-indigo-10 bg-indigo-2","row-key":"id",dense:""},on:{"update:pagination":function(e){t.pagination=e},request:t.doMainEquipmentChangePage},scopedSlots:t._u([{key:"body-cell-action",fn:function(e){return o("q-td",{},[o("q-btn-dropdown",{attrs:{rounded:"",size:"sm",color:"indigo-10"}},[o("q-list",[o("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""}},[o("q-item-section",[o("q-btn",{attrs:{color:"indigo-6",round:"",size:"sm"},on:{click:function(o){return t.doOpenForm(e.row.pid)}}},[o("q-icon",{attrs:{name:"fas fa-edit"}}),o("q-tooltip",[t._v("Edit")])],1)],1)],1),o("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""}},[o("q-item-section",[o("q-btn",{attrs:{color:"indigo-6",round:"",size:"sm"},on:{click:function(o){return t.doToggleStatus(e)}}},[o("q-icon",{attrs:{name:"A"===e.row.recordStatus?"fas fa-stop-circle":"fas fa-play-circle"}}),o("q-tooltip",[t._v(t._s("A"===e.row.recordStatus?"Deactivate":"Activate"))])],1)],1)],1)],1)],1)],1)}},{key:"body-cell-recordStatus",fn:function(t){return o("q-td",{},["A"===t.row.recordStatus?o("div",[o("q-icon",{staticStyle:{"font-size":"20px"},attrs:{name:"done",color:"primary"}})],1):o("div",[o("q-icon",{staticStyle:{"font-size":"20px"},attrs:{name:"clear",color:"negative"}})],1)])}}])})],1)],1),o("q-page-sticky",{attrs:{position:"top-right",offset:[15,30]}},[o("q-fab",{attrs:{color:"orange-7",glossy:"",icon:"keyboard_arrow_down",direction:"down"}},[o("q-fab-action",{attrs:{color:"orange-6","text-color":"white",icon:"add"},nativeOn:{click:function(e){return t.doOpenForm(!1)}}},[o("q-tooltip",[t._v("Add")])],1),o("q-fab-action",{attrs:{color:"orange-6","text-color":"white",icon:"backup"},nativeOn:{click:function(e){t.modalUploadExcel=!0}}},[o("q-tooltip",[t._v("Upload Excel")])],1),o("q-btn",{attrs:{round:"",color:"orange-6","text-color":"white"},nativeOn:{click:function(e){t.modalDownloadExcel=!0}}},[o("q-icon",{attrs:{name:"fas fa-file-excel"}}),o("q-tooltip",[t._v("Download Excel")])],1)],1)],1),o("q-dialog",{attrs:{persistent:""},on:{"before-hide":function(e){return t.clear()}},model:{value:t.showForm,callback:function(e){t.showForm=e},expression:"showForm"}},[o("q-card",{staticClass:"bg-white"},[o("q-bar",{staticClass:"bg-indigo-10 text-white"},[o("strong",[t._v("Product Type Form")]),o("q-space"),o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close"}})],1),o("q-card-section",[o("div",[o("q-input",{staticClass:"text-italic",attrs:{readonly:"",label:"Type Code"},model:{value:t.formData.pid,callback:function(e){t.$set(t.formData,"pid",e)},expression:"formData.pid"}}),o("q-input",{staticClass:"text-uppercase",attrs:{"stack-label":"",oninput:"this.value = this.value.toUpperCase()",label:"Product Type"},model:{value:t.formData.productType,callback:function(e){t.$set(t.formData,"productType",e)},expression:"formData.productType"}}),o("q-select",{attrs:{"stack-label":"",options:t.categoryList,label:"Equipment Category"},model:{value:t.formData.equipmentCategory,callback:function(e){t.$set(t.formData,"equipmentCategory",e)},expression:"formData.equipmentCategory"}})],1),o("br"),o("fieldset",[o("legend",[t._v("Sub Type List")]),o("q-table",{attrs:{data:t.listOfSubType,columns:t.subTypeColumns,pagination:t.subTypePagination,"row-key":"id","hide-bottom":!0,dense:""},on:{"update:pagination":function(e){t.subTypePagination=e}},scopedSlots:t._u([{key:"body-cell-id",fn:function(e){return o("q-td",{},[t._v("\n              "+t._s(e.row.id)+"\n              "),o("q-popup-edit",{model:{value:e.row.id,callback:function(o){t.$set(e.row,"id",o)},expression:"cell.row.id"}},[o("q-input",{attrs:{dense:""},model:{value:e.row.id,callback:function(o){t.$set(e.row,"id",o)},expression:"cell.row.id"}})],1)],1)}},{key:"body-cell-subtype",fn:function(e){return o("q-td",{},[t._v("\n              "+t._s(e.row.subtype)+"\n              "),o("q-popup-edit",{model:{value:e.row.subtype,callback:function(o){t.$set(e.row,"subtype",o)},expression:"cell.row.subtype"}},[o("q-input",{attrs:{dense:""},model:{value:e.row.subtype,callback:function(o){t.$set(e.row,"subtype",o)},expression:"cell.row.subtype"}})],1)],1)}},{key:"body-cell-recordStatus",fn:function(t){return o("q-td",{},["A"===t.row.recordStatus?o("div",[o("q-icon",{staticStyle:{"font-size":"20px"},attrs:{name:"done",color:"primary"}})],1):o("div",[o("q-icon",{staticStyle:{"font-size":"20px"},attrs:{name:"clear",color:"negative"}})],1)])}},{key:"body-cell-action",fn:function(e){return o("q-td",{},[o("q-btn",{attrs:{color:"primary",round:"",size:"sm"},on:{click:function(o){return t.doToggleSubTypeStatus(e)}}},[o("q-icon",{attrs:{name:"A"===e.row.recordStatus?"fas fa-stop-circle":"fas fa-play-circle"}}),o("q-tooltip",[t._v(t._s("A"===e.row.recordStatus?"Deactivate":"Activate"))])],1)],1)}}])}),o("div",{staticStyle:{"text-align":"right","margin-top":"10px"}},[o("q-btn",{attrs:{flat:"",round:"",color:"primary",size:"xs"},nativeOn:{click:function(e){return t.doAddNewSubType()}}},[o("q-icon",{attrs:{name:"fas fa-plus"}}),o("q-tooltip",[t._v("Add New Subtype")])],1)],1)],1),o("br"),o("br"),o("div",{staticStyle:{"text-align":"right"}},[o("q-btn",{attrs:{round:"",color:"primary",size:"small"},nativeOn:{click:function(e){return t.doSave()}}},[o("q-icon",{attrs:{name:"fas fa-save"}}),o("q-tooltip",[t._v("Save Form")])],1)],1)])],1)],1),o("q-dialog",{attrs:{persistent:""},on:{"before-hide":function(e){return t.doHideButton()}},model:{value:t.modalUploadExcel,callback:function(e){t.modalUploadExcel=e},expression:"modalUploadExcel"}},[o("q-card",{staticClass:"bg-white"},[o("q-bar",{staticClass:"bg-indigo-10 text-white"},[o("strong",[t._v("Upload Excel File")]),o("q-space"),o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close"}})],1),o("q-card-section",[t._v("\n        Download Template:\n        "),o("br"),o("a",{attrs:{href:"/statics/template/Product Type - Form Upload.xlsx"}},[t._v("Product Type")]),o("br"),o("a",{attrs:{href:"/statics/template/Sub Type - Form Upload.xlsx"}},[t._v("Sub Type")])]),o("q-card-section",[o("q-radio",{staticStyle:{"margin-right":"10px"},attrs:{val:"productType",label:"Product Type",color:"indigo-7"},on:{input:t.getInitPage},model:{value:t.fileAttach.equipmentCategory,callback:function(e){t.$set(t.fileAttach,"equipmentCategory",e)},expression:"fileAttach.equipmentCategory"}}),o("q-radio",{staticStyle:{"margin-right":"10px"},attrs:{val:"subType",label:"Sub Type",color:"indigo-7"},on:{input:t.getInitPage},model:{value:t.fileAttach.equipmentCategory,callback:function(e){t.$set(t.fileAttach,"equipmentCategory",e)},expression:"fileAttach.equipmentCategory"}}),o("q-input",{attrs:{type:"file"},on:{input:function(e){t.doAttachFile(e[0])}}}),o("div",{staticStyle:{"margin-top":"20px"},attrs:{align:"right"}},[o("q-btn",{attrs:{round:"",color:"orange-6"},on:{click:function(e){return t.uploadProductType()}}},[o("q-icon",{attrs:{name:"fas fa-file-upload"}}),o("q-tooltip",[t._v("Upload")])],1)],1)],1)],1)],1),o("q-dialog",{attrs:{persistent:""},on:{"before-hide":function(e){return t.doHideButton()}},model:{value:t.modalDownloadExcel,callback:function(e){t.modalDownloadExcel=e},expression:"modalDownloadExcel"}},[o("q-card",{staticClass:"bg-white"},[o("q-bar",{staticClass:"bg-indigo-10 text-white"},[o("strong",[t._v("Download Excel File")]),o("q-space"),o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close"}})],1),o("q-card-section",[o("q-radio",{staticStyle:{"margin-right":"10px"},attrs:{val:"productType",label:"Product Type",color:"indigo-7"},model:{value:t.downloadType,callback:function(e){t.downloadType=e},expression:"downloadType"}}),o("q-radio",{staticStyle:{"margin-right":"10px"},attrs:{val:"subType",label:"Sub Type",color:"indigo-7"},model:{value:t.downloadType,callback:function(e){t.downloadType=e},expression:"downloadType"}}),o("div",{attrs:{align:"right"}},[o("q-btn",{attrs:{round:"",color:"orange-9","text-color":"white"},nativeOn:{click:function(e){return t.downloadExcel(e)}}},[o("q-icon",{attrs:{name:"get_app"}}),o("q-tooltip",[t._v("Download")])],1)],1)],1)],1)],1)],1)},i=[],n=(o("7f7f"),o("3a5f")),r={mixins:[n["a"]],data:function(){return{dataList:[],listOfSubType:[],modalUploadExcel:!1,modalDownloadExcel:!1,downloadType:"productType",categoryList:["Field","Indoor","Network"],fileAttach:{fileName:"",file64:"",equipmentCategory:"productType"},tableColumns:[{name:"pid",label:"Type Code",field:"pid",align:"left",style:"width: 100px",sortable:!0},{name:"productType",label:"Product Type",field:"productType",align:"left",style:"width: 200px",sortable:!0},{name:"equipmentCategory",label:"Equipment Category",field:"equipmentCategory",align:"left",style:"width: 200px",sortable:!0},{name:"recordStatus",label:"Status",field:"recordStatus",align:"left",sortable:!0},{name:"action",label:"Action",align:"center",style:"width: 100px"}],subTypeColumns:[{name:"subtype",label:"Subtype Name",field:"subtype",align:"left",style:"width: 200px",sortable:!0},{name:"recordStatus",label:"Status",field:"recordStatus",align:"left",style:"width: 200px",sortable:!0},{name:"action",label:"Action",align:"center",style:"width: 100px"}],pagination:{sortBy:"id",page:1,rowsPerPage:10,rowsNumber:0,descending:!1},subTypePagination:{sortBy:"id",descending:!1,rowsPerPage:0},searchVal:{productType:"",category:"ALL"},categorySearchList:["ALL","Field","Indoor","Network"],showForm:!1,formData:{pid:"AUTO GENERATE",equipmentCategory:"",mode:"create"}}},methods:{doInitPage:function(){var t=this;this.showLoading(),this.$axios.get("".concat("/","getProductTypeSubTypeInitPage"),{params:{pageIndex:this.pagination.page-1,pageSize:this.pagination.rowsPerPage,sortBy:this.pagination.sortBy,descending:this.pagination.descending}}).then((function(e){t.$q.loading.hide(),t.doMainFillTableResult(e.data)})).catch((function(e){t.$q.loading.hide(),t.$q.notify({color:"negative",icon:"report_problem",message:e})}))},getProductTypeSubTypeList:function(t){var e=this;this.showLoading(),this.$axios.get("".concat("/","getProductTypeSubTypeList"),{params:t}).then((function(t){e.$q.loading.hide(),e.doMainFillTableResult(t.data)})).catch((function(t){e.$q.loading.hide(),e.$q.notify({color:"negative",icon:"report_problem",message:t})}))},doMainFillTableResult:function(t){this.dataList=t.content,this.pagination.rowsNumber=t.totalElements,this.pagination.rowsPerPage=t.pageable.pageSize,this.pagination.page=t.number+1},doMainEquipmentChangePage:function(t){var e=t.pagination,o=e.page,a=e.rowsPerPage,i=e.sortBy,n=e.descending,r={pageIndex:o-1,pageSize:a,sortBy:i,descending:n,productType:this.searchVal.productType,category:this.searchVal.category};this.getProductTypeSubTypeList(r)},doSearchByFilter:function(){var t={pageIndex:this.pagination.page-1,pageSize:this.pagination.rowsPerPage,sortBy:this.pagination.sortBy,descending:this.pagination.descending,productType:this.searchVal.productType,category:this.searchVal.category};this.getProductTypeSubTypeList(t)},doOpenForm:function(t){var e=this;!1===t?this.showForm=!0:(this.showLoading(),this.$axios.get("".concat("/","getProductTypeSubTypeDetail"),{params:{pid:t}}).then((function(t){e.formData=t.data,e.listOfSubType=JSON.parse(e.formData.subType),e.formData.mode="update",e.showForm=!0,e.$q.loading.hide()})).catch((function(t){e.$q.notify({color:"negative",icon:"report_problem",message:t}),e.$q.loading.hide()})))},doSave:function(t){var e=this;this.showLoading(),t||(this.formData.subType=JSON.stringify(this.listOfSubType)),"AUTO GENERATE"===this.formData.pid&&(this.formData.pid=""),this.$axios.post("".concat("/","saveProductTypeSubType"),this.formData).then((function(t){e.$q.loading.hide(),"Success"===t.data?e.$q.notify({color:"positive",icon:"info",message:"Record successfully saved"}):e.$q.notify({color:"negative",icon:"report_problem",message:t.data}),e.showForm=!1,e.doRefresh()})).catch((function(t){e.$q.loading.hide(),e.$q.notify({color:"negative",icon:"report_problem",message:t}),e.showForm=!1,e.doRefresh()}))},doAttachFile:function(t){var e=this,o=new FileReader;this.uploadButton=!0,o.onload=function(o){e.fileAttach.fileName=t.name,e.fileAttach.file64=o.target.result},o.readAsDataURL(t)},uploadProductType:function(t){var e=this;this.showLoading(),this.$axios.post("".concat("/","uploadProductType"),this.fileAttach).then((function(t){e.modalUploadExcel=!1,e.$q.loading.hide(),e.doInitPage()})).catch((function(t){e.$q.loading.hide(),e.$q.notify({color:"negative",icon:"report_problem",message:t})}))},downloadExcel:function(){"productType"===this.downloadType?this.productTypeExcelDownload():this.subTypeExcelDownload()},productTypeExcelDownload:function(t){var e=this;this.showLoading(),this.$axios.get("".concat("/","productTypeExcelDownload"),{responseType:"arraybuffer"}).then((function(t){e.$q.loading.hide();var o=window.URL.createObjectURL(new Blob([t.data]),{type:""}),a=document.createElement("a");a.href=o,a.style="display: none",a.download="master_product_type.xlsx",document.body.appendChild(a),a.click()})).catch((function(t){e.$q.loading.hide(),e.notify({color:"negative",icon:"report_problem",message:t})}))},subTypeExcelDownload:function(t){var e=this;this.showLoading(),this.$axios.get("".concat("/","subTypeExcelDownload"),{responseType:"arraybuffer"}).then((function(t){e.$q.loading.hide();var o=window.URL.createObjectURL(new Blob([t.data]),{type:""}),a=document.createElement("a");a.href=o,a.style="display: none",a.download="master_sub_type.xlsx",document.body.appendChild(a),a.click()})).catch((function(t){e.$q.loading.hide(),e.notify({color:"negative",icon:"report_problem",message:t})}))},doAddNewSubType:function(){var t={};this.$set(t,"subtype",""),this.$set(t,"recordStatus","A"),this.listOfSubType.push(t)},doToggleStatus:function(t){t.row.recordStatus="I"===t.row.recordStatus?"A":"I",this.formData=t.row,this.formData.mode="update",this.doSave(!0)},doToggleSubTypeStatus:function(t){t.row.recordStatus="I"===t.row.recordStatus?"A":"I",this.listOfSubType[t]=t.row},doRefresh:function(){this.clear(),this.doInitPage()},clear:function(){this.formData={pid:"AUTO GENERATE",equipmentCategory:"",mode:"create"},this.listOfSubType=[]}},beforeMount:function(){this.doInitPage()}},s=r,l=(o("5931"),o("2877")),c=Object(l["a"])(s,a,i,!1,null,null,null);e["default"]=c.exports},"3a5f":function(t,e,o){"use strict";var a=o("8380");e["a"]={methods:{showLoading:function(){this.$q.loading.show({spinner:a["a"],spinnerColor:"orange-10",spinnerSize:140,backgroundColor:"purple",messageColor:"black"})},showCheckingLoading:function(){this.$q.loading.show({spinner:a["a"],message:"Checking Excel Data...",spinnerColor:"orange-10",spinnerSize:60,backgroundColor:"purple",messageColor:"white",messageSize:60})},showUploadLoading:function(){this.$q.loading.show({spinner:a["a"],message:"Uploading Excel Data...",spinnerColor:"orange-10",spinnerSize:60,backgroundColor:"purple",messageColor:"white",messageSize:60})}}}},"4db2":function(t,e,o){},5931:function(t,e,o){"use strict";var a=o("4db2"),i=o.n(a);i.a}}]);