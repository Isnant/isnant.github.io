(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[31],{"0371":function(t,i,e){"use strict";e.r(i);var n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticStyle:{"margin-left":"10px","margin-right":"10px","margin-bottom":"10px","margin-top":"2px"},attrs:{id:"main"}},[e("font",{staticClass:"text-bold",attrs:{size:"1",color:"grey"}},[t._v("SECURITY / ROLE LIST")]),e("div",{staticStyle:{"margin-bottom":"30px","margin-top":"10px",width:"120px"},attrs:{align:"left"}},[e("font",{staticClass:"text-bold",staticStyle:{"margin-bottom":"10px"},attrs:{size:"5"}},[t._v("ROLE LIST")]),e("q-separator",{attrs:{color:"purple-10"}}),e("q-separator",{attrs:{color:"purple-10"}})],1),e("q-table",{staticStyle:{width:"700px","margin-bottom":"100px"},attrs:{data:t.dataList,columns:t.columns,pagination:t.pagination,"row-key":"id","table-header-class":"text-white bg-indigo-8",dense:""},on:{"update:pagination":function(i){t.pagination=i},request:t.getContent},scopedSlots:t._u([{key:"body-cell-lastModified",fn:function(i){return e("q-td",{staticStyle:{"text-align":"center"}},[t._v("\n      "+t._s(t._f("formatDateTime")(i.row.lastModified))+"\n    ")])}},{key:"body-cell-action",fn:function(i){return e("q-td",{attrs:{align:"center"}},[e("div",[e("q-btn",{staticClass:"bg-blue-10 text-white",attrs:{round:"",size:"sm",icon:"edit"},nativeOn:{click:function(e){return t.showForm(i.row.id)}}})],1)])}}])}),e("q-page-sticky",{attrs:{position:"top-right",offset:[30,30]}},[e("q-btn",{attrs:{icon:"add",round:"",color:"orange-5"},on:{click:function(i){return t.showForm()}}},[e("q-tooltip",[t._v("Add New")])],1)],1),e("q-dialog",{attrs:{persistent:""},on:{"before-hide":function(i){return t.doBeforeFormClose()}},model:{value:t.isFormVisible,callback:function(i){t.isFormVisible=i},expression:"isFormVisible"}},[e("q-card",{staticClass:"bg-white "},[e("q-bar",{staticClass:"bg-primary text-white"},[e("strong",[t._v("Role Form")]),e("q-space"),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close"}})],1),e("q-card-section",[e("q-input",{attrs:{label:"Role Name",readonly:void 0!==t.instance.createdBy},model:{value:t.instance.name,callback:function(i){t.$set(t.instance,"name",i)},expression:"instance.name"}}),e("br"),e("q-option-group",{attrs:{options:t.rights,label:"Rights",type:"checkbox",dense:""},model:{value:t.instance.rights,callback:function(i){t.$set(t.instance,"rights",i)},expression:"instance.rights"}}),e("div",{attrs:{align:"right"}},[e("q-btn",{attrs:{round:"",icon:"save",size:"md",color:"orange-5"},on:{click:function(i){return t.doSave()}}},[e("q-tooltip",[t._v("Submit")])],1)],1)],1)],1)],1)],1)},a=[],o=(e("7f7f"),e("28a5"),{beforeMount:function(){this.getInitPage()},data:function(){return{dataList:[],columns:[{name:"name",label:"Role Name",field:"name",align:"center",sortable:!0},{name:"lastModified",label:"Modified Date",field:"lastModified",align:"center",sortable:!0},{name:"action",label:"Action",field:"action",align:"center",sortable:!0}],pagination:{sortBy:"name",descending:!1,page:1,rowsPerPage:20},isFormVisible:!1,instance:{name:[],rights:[],createBy:void 0},rights:[]}},methods:{getInitPage:function(){var t=this,i=localStorage.getItem("user-token");void 0!==i&&null!==i||(this.$q.loading.hide(),this.$router.push("/login")),this.$q.loading.show(),this.$axios.get("".concat("/","getRoleListInitData"),{params:{pageIndex:this.pagination.page-1,pageSize:this.pagination.rowsPerPage,sortBy:this.pagination.sortBy,descending:this.pagination.descending}}).then((function(i){t.$q.loading.hide(),t.dataList=i.data.listOfRoles.content,t.pagination.rowsNumber=i.data.listOfRoles.totalElements,t.pagination.page=i.data.listOfRoles.number+1,t.rights=i.data.listOfRights})).catch((function(i){t.$q.loading.hide(),t.$q.notify({color:"negative",icon:"report_problem",message:i})}))},getContent:function(){var t=this;this.$q.loading.show(),this.$axios.get("".concat("/","getRoleList"),{params:{pageIndex:this.pagination.page-1,pageSize:this.pagination.rowsPerPage,sortBy:this.pagination.sortBy,descending:this.pagination.descending}}).then((function(i){t.$q.loading.hide(),t.dataList=i.data.content,t.pagination.rowsNumber=i.data.totalElements,t.pagination.page=i.data.number+1})).catch((function(i){t.$q.loading.hide(),t.$q.notify({color:"negative",icon:"report_problem",message:i})}))},showForm:function(t){var i=this;this.$q.loading.show(),void 0!==t?this.$axios.get("".concat("/","getRoleForm"),{params:{id:t}}).then((function(t){i.$q.loading.hide(),i.instance=t.data,i.instance.rights=i.instance.rights.substr(1,i.instance.rights.length-2).split(";"),i.isFormVisible=!0})).catch((function(t){i.$q.loading.hide(),i.$q.notify({color:"negative",icon:"report_problem",message:t})})):(this.$q.loading.hide(),this.isFormVisible=!0)},doBeforeFormClose:function(){void 0!==this.instance&&(delete this.instance.id,this.instance.name="",this.instance.rights=[],this.instance.createdDate=void 0,this.instance.createdBy=void 0,this.lastModified=void 0,this.modifiedBy=void 0,this.recordStatus=void 0)},doSave:function(){var t=this;if(this.$q.loading.show(),0===this.instance.rights.length)return this.$q.notify({color:"negative",icon:"report_problem",message:"Rights is required. Please assign at least one rights."}),void this.$q.loading.hide();this.instance.rights=";"+this.instance.rights.join(";")+";",this.$axios.post("".concat("/","doSaveRole"),this.instance).then((function(i){t.$q.loading.hide(),t.$q.notify({color:"positive",icon:"report_problem",message:"Role "+t.instance.name+" saved"}),t.doBeforeFormClose(),t.isFormVisible=!1,t.getContent()})).catch((function(i){t.$q.loading.hide(),t.$q.notify({color:"negative",icon:"report_problem",message:i})}))}}}),s=o,r=e("2877"),l=Object(r["a"])(s,n,a,!1,null,null,null);i["default"]=l.exports}}]);