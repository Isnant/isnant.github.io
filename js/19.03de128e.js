(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[19],{"29c8":function(e,a,t){},"3a5f":function(e,a,t){"use strict";var o=t("8380");a["a"]={methods:{showLoading:function(){this.$q.loading.show({spinner:o["a"],spinnerColor:"orange-10",spinnerSize:140,backgroundColor:"purple",messageColor:"black"})},showCheckingLoading:function(){this.$q.loading.show({spinner:o["a"],message:"Checking Excel Data...",spinnerColor:"orange-10",spinnerSize:60,backgroundColor:"purple",messageColor:"white",messageSize:60})},showUploadLoading:function(){this.$q.loading.show({spinner:o["a"],message:"Uploading Excel Data...",spinnerColor:"orange-10",spinnerSize:60,backgroundColor:"purple",messageColor:"white",messageSize:60})}}}},5497:function(e,a,t){"use strict";t.r(a);var o=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("q-page",[t("font",{staticClass:"text-bold",attrs:{size:"1",color:"grey"}},[e._v("EQUIPMENT "),t("q-icon",{attrs:{name:"double_arrow"}}),e._v(" MIGRATION HISTORY")],1),t("div",{staticStyle:{"margin-bottom":"30px",width:"240px"},attrs:{align:"left"}},[t("font",{staticClass:"text-bold",staticStyle:{"margin-bottom":"10px"},attrs:{size:"5"}},[e._v("MIGRATION HISTORY")]),t("div",{staticClass:"row"},[t("div",{staticClass:"col-20",staticStyle:{width:"32%"}},[t("q-separator",{attrs:{color:"orange-10"}}),t("q-separator",{attrs:{color:"orange-10"}})],1),t("div",{staticClass:"col"},[t("q-separator",{attrs:{color:"indigo-10"}}),t("q-separator",{attrs:{color:"indigo-10"}})],1)])],1),t("q-card",[t("q-card-section",[t("q-expansion-item",{staticStyle:{"margin-bottom":"10px"},attrs:{label:"SEARCH","header-class":"bg-indigo-2 text-indigo-10",icon:"search"}},[t("div",{staticClass:"row bg-orange-1",staticStyle:{padding:"10px",width:"100%"}},[t("div",{staticClass:"row",staticStyle:{"margin-bottom":"10px"}},[t("div",{staticClass:"col-15",staticStyle:{"margin-right":"10px",width:"18%"}},[t("q-input",{staticClass:"searchform",attrs:{rounded:"",outlined:"","stack-label":"",color:"orange-8",label:"Equipment Id"},model:{value:e.searchVal.equipmentId,callback:function(a){e.$set(e.searchVal,"equipmentId",a)},expression:"searchVal.equipmentId"}})],1),t("div",{staticClass:"col-15",staticStyle:{"margin-right":"10px",width:"20%"}},[t("q-input",{staticClass:"searchform",attrs:{clearable:"",rounded:"",outlined:"","stack-label":"",color:"orange-8",label:"Start Date"},on:{input:function(a){return e.doClearSearchVal("start")}},scopedSlots:e._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{name:"event"}},[t("q-popup-proxy",{ref:"qreqDateStart",attrs:{"transition-show":"scale","transition-hide":"scale"}},[t("q-date",{attrs:{mask:"DD/MM/YYYY"},on:{input:function(){return e.$refs.qreqDateStart.hide()}},model:{value:e.searchVal.reqStartDate,callback:function(a){e.$set(e.searchVal,"reqStartDate",a)},expression:"searchVal.reqStartDate"}})],1)],1)]},proxy:!0}]),model:{value:e.searchVal.reqStartDate,callback:function(a){e.$set(e.searchVal,"reqStartDate",a)},expression:"searchVal.reqStartDate"}})],1),t("div",{staticClass:"col-15",staticStyle:{"margin-right":"10px",width:"20%"}},[t("q-input",{staticClass:"searchform",attrs:{rounded:"",outlined:"","stack-label":"",color:"orange-8",clearable:"",label:"End Date"},on:{input:function(a){return e.doClearSearchVal("end")}},scopedSlots:e._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{name:"event"}},[t("q-popup-proxy",{ref:"qreqDateEnd",attrs:{"transition-show":"scale","transition-hide":"scale"}},[t("q-date",{attrs:{mask:"DD/MM/YYYY"},on:{input:function(){return e.$refs.qreqDateEnd.hide()}},model:{value:e.searchVal.reqEndDate,callback:function(a){e.$set(e.searchVal,"reqEndDate",a)},expression:"searchVal.reqEndDate"}})],1)],1)]},proxy:!0}]),model:{value:e.searchVal.reqEndDate,callback:function(a){e.$set(e.searchVal,"reqEndDate",a)},expression:"searchVal.reqEndDate"}})],1),t("div",{staticClass:"col-15",staticStyle:{"margin-right":"10px",width:"18%"}},[t("q-input",{staticClass:"searchform",attrs:{rounded:"",outlined:"","stack-label":"",color:"orange-8",label:"Source Code"},model:{value:e.searchVal.sourceCode,callback:function(a){e.$set(e.searchVal,"sourceCode",a)},expression:"searchVal.sourceCode"}})],1),t("div",{staticClass:"col-15",staticStyle:{"margin-right":"10px",width:"18%"}},[t("q-input",{staticClass:"searchform",attrs:{rounded:"",outlined:"","stack-label":"",color:"orange-8",label:"New Code"},model:{value:e.searchVal.newCode,callback:function(a){e.$set(e.searchVal,"newCode",a)},expression:"searchVal.newCode"}})],1)]),t("div",{staticClass:"col-15",staticStyle:{"margin-right":"10px",width:"30%"}},[t("q-select",{staticClass:"searchform",attrs:{label:"Migration Type",rounded:"",outlined:"","stack-label":"",color:"orange-8",options:e.migrationTypeList},model:{value:e.searchVal.migrationType,callback:function(a){e.$set(e.searchVal,"migrationType",a)},expression:"searchVal.migrationType"}})],1),t("div",{staticClass:"col-15",staticStyle:{"margin-right":"10px",width:"30%"}},[t("q-select",{staticClass:"searchform",attrs:{label:"Product Type",rounded:"",outlined:"","stack-label":"",color:"orange-8",options:e.productTypeListSearch},on:{input:function(a){return e.getDropdownValue("productTypeSearch")}},model:{value:e.searchVal.productType,callback:function(a){e.$set(e.searchVal,"productType",a)},expression:"searchVal.productType"}})],1),t("div",{staticClass:"col",staticStyle:{"margin-right":"20px"}},[t("q-input",{staticClass:"searchform",attrs:{"stack-label":"",rounded:"",outlined:"",color:"orange-8",label:"Created By"},on:{input:function(a){return e.doClearSearchVal("createdBy")}},model:{value:e.searchVal.createdBy,callback:function(a){e.$set(e.searchVal,"createdBy",a)},expression:"searchVal.createdBy"}})],1),t("div",{staticClass:"row",staticStyle:{margin:"10px"}},[t("div",{staticClass:"col"},[t("q-btn",{attrs:{round:"",color:"indigo-10"},on:{click:function(a){return e.doSearchByFilter()}}},[t("q-icon",{attrs:{name:"search"}}),t("q-tooltip",[e._v("Search")])],1)],1)])])]),t("q-table",{attrs:{data:e.dataList,columns:e.tableColumns,pagination:e.pagination,"table-header-class":"text-indigo-10 bg-indigo-2","row-key":"id",dense:""},on:{"update:pagination":function(a){e.pagination=a},request:e.doMainEquipmentChangePage},scopedSlots:e._u([{key:"body-cell-historyDate",fn:function(a){return t("q-td",{},[e._v("\n          "+e._s(e._f("formatDate")(a.row.historyDate))+"\n        ")])}},{key:"body-cell-createdDate",fn:function(a){return t("q-td",{},[e._v("\n          "+e._s(e._f("formatDateTime")(a.row.createdDate))+"\n        ")])}}])})],1)],1),t("q-page-sticky",{attrs:{position:"top-right",offset:[15,30]}},[t("q-btn",{attrs:{round:"",color:"green","text-color":"white"},nativeOn:{click:function(a){return e.downloadExcel(a)}}},[t("q-icon",{attrs:{name:"fas fa-file-excel"}}),t("q-tooltip",[e._v("Download Excel")])],1)],1),t("q-dialog",{attrs:{persistent:""},on:{"before-hide":function(a){return e.clear()}},model:{value:e.showForm,callback:function(a){e.showForm=a},expression:"showForm"}},[t("q-card",{staticClass:"bg-white"},[t("q-bar",{staticClass:"bg-blue-7 text-white"},[t("strong",[e._v("Building Form")]),t("q-space"),t("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close"}})],1),t("q-card-section",[t("div",{staticClass:"row"},[t("div",{staticClass:"col"},[t("q-input",{attrs:{"stack-label":"",label:"Building Code"},model:{value:e.formData.pid,callback:function(a){e.$set(e.formData,"pid",a)},expression:"formData.pid"}}),t("q-input",{attrs:{"stack-label":"",label:"Region Id"},model:{value:e.formData.fidRegion,callback:function(a){e.$set(e.formData,"fidRegion",a)},expression:"formData.fidRegion"}}),t("q-input",{attrs:{"stack-label":"",label:"Building buildingType"},model:{value:e.formData.buildingType,callback:function(a){e.$set(e.formData,"buildingType",a)},expression:"formData.buildingType"}}),t("q-input",{attrs:{"stack-label":"",label:"Building Name"},model:{value:e.formData.buildingName,callback:function(a){e.$set(e.formData,"buildingName",a)},expression:"formData.buildingName"}}),t("q-input",{attrs:{"stack-label":"",label:"IT Code"},model:{value:e.formData.itCode,callback:function(a){e.$set(e.formData,"itCode",a)},expression:"formData.itCode"}}),t("q-select",{attrs:{"stack-label":"",label:"Area Name",options:e.areaList},on:{input:function(a){return e.getRegion()}},model:{value:e.formData.area,callback:function(a){e.$set(e.formData,"area",a)},expression:"formData.area"}}),t("q-select",{attrs:{"stack-label":"",label:"Region",options:e.filteredRegionList},model:{value:e.formData.region,callback:function(a){e.$set(e.formData,"region",a)},expression:"formData.region"}}),t("q-input",{attrs:{"stack-label":"",label:"City"},model:{value:e.formData.city,callback:function(a){e.$set(e.formData,"city",a)},expression:"formData.city"}})],1),t("div",{staticClass:"col",staticStyle:{"margin-left":"20px"}},[t("q-input",{attrs:{"stack-label":"",label:"Location Name"},model:{value:e.formData.locationName,callback:function(a){e.$set(e.formData,"locationName",a)},expression:"formData.locationName"}}),t("q-input",{attrs:{"stack-label":"",label:"ComplexName"},model:{value:e.formData.complexName,callback:function(a){e.$set(e.formData,"complexName",a)},expression:"formData.complexName"}}),t("q-input",{attrs:{"stack-label":"",label:"Steet Name"},model:{value:e.formData.streetName,callback:function(a){e.$set(e.formData,"streetName",a)},expression:"formData.streetName"}}),t("q-input",{attrs:{"stack-label":"",label:"Street Number"},model:{value:e.formData.streetNumber,callback:function(a){e.$set(e.formData,"streetNumber",a)},expression:"formData.streetNumber"}}),t("q-input",{attrs:{"stack-label":"",label:"Postal Code"},model:{value:e.formData.postalCode,callback:function(a){e.$set(e.formData,"postalCode",a)},expression:"formData.postalCode"}}),t("q-input",{attrs:{"stack-label":"",label:"Phone"},model:{value:e.formData.phone,callback:function(a){e.$set(e.formData,"phone",a)},expression:"formData.phone"}}),t("q-input",{attrs:{"stack-label":"",label:"Fax"},model:{value:e.formData.fax,callback:function(a){e.$set(e.formData,"fax",a)},expression:"formData.fax"}})],1)]),t("div",{staticStyle:{"text-align":"right"}},[t("q-btn",{attrs:{round:"",color:"primary",size:"small"},nativeOn:{click:function(a){return e.doSave()}}},[t("q-icon",{attrs:{name:"fas fa-save"}}),t("q-tooltip",[e._v("Save Form")])],1)],1)])],1)],1)],1)},i=[],r=(t("20d6"),t("28a5"),t("3a5f")),s={mixins:[r["a"]],data:function(){return{dataList:[],areaList:[],regionList:[],filteredRegionList:[],listOfRegion:[],listOfAreaForRegion:[],productTypeListSearch:"",migrationTypeList:["ALL","Change Service","Change Code","Split Node","Reroute","Revision"],tableColumns:[{name:"assetId",label:"Equipment Id",field:"assetId",align:"left",style:"width: 100px",sortable:!0},{name:"newProductType",label:"Product Type",field:"newProductType",align:"left",style:"width: 200px",sortable:!0},{name:"originalCode",label:"Source Code",field:"originalCode",align:"left",style:"width: 200px",sortable:!0},{name:"newCode",label:"New Code",field:"newCode",align:"left",sortable:!0},{name:"originalHub",label:"Source Hub",field:"originalHub",align:"left",style:"width: 200px",sortable:!0},{name:"newHub",label:"New Hub",field:"newHub",align:"left",sortable:!0},{name:"assetStatus",label:"Equipment Status",field:"assetStatus",align:"left",style:"width: 200px",sortable:!0},{name:"historyDate",label:"Migration Date",field:"historyDate",align:"left",style:"width: 200px",sortable:!0},{name:"createdDate",label:"Created Date",field:"createdDate",align:"left",style:"width: 200px",sortable:!0},{name:"createdBy",label:"Created By",field:"createdBy",align:"left",style:"width: 200px",sortable:!0},{name:"migrationType",label:"Migration Type",field:"migrationType",align:"left",style:"width: 200px",sortable:!0}],pagination:{sortBy:"createdDate",descending:!0,page:1,rowsPerPage:10,rowsNumber:0},regionPagination:{sortBy:"region",descending:!1,rowsPerPage:0},searchVal:{reqStartDate:"",reqEndDate:"",createdBy:"",sourceCode:"",newCode:"",migrationType:"ALL",productType:"ALL",equipmentId:""},showForm:!1,formData:{pid:"",fidRegion:"",buildingType:"",buildingName:"",itCode:"",area:"",region:"",city:"",locationName:"",complexName:"",streetName:"",streetNumber:"",postalCode:"",phone:"",fax:""}}},methods:{doInitPage:function(){var e=this;this.showLoading();var a=localStorage.getItem("user-token"),t=JSON.parse(atob(a.split(".")[1])).authorities;-1===t.findIndex((function(e){return"ROLE_06"===e}))&&this.$router.push("/"),this.$axios.get("".concat("/","getMigrationHistoryInitData"),{params:{pageIndex:this.pagination.page-1,pageSize:this.pagination.rowsPerPage,sortBy:this.pagination.sortBy,descending:this.pagination.descending,searchVal:this.searchVal}}).then((function(a){e.$q.loading.hide(),e.doMainFillTableResult(a.data.listOfMigrationHistory),e.productTypeListSearch=a.data.listOfProductTypeSearch.filter((function(e){return"Field"===e.cascadeValue})),e.productTypeListSearch.unshift({label:"ALL",value:"ALL"})})).catch((function(a){e.$q.loading.hide(),e.$q.notify({color:"negative",icon:"report_problem",message:a})}))},getMigrationHistoryList:function(e){var a=this;this.showLoading(),this.$axios.get("".concat("/","getMigrationHistoryList"),{params:e}).then((function(e){a.$q.loading.hide(),a.doMainFillTableResult(e.data)})).catch((function(e){a.$q.loading.hide(),a.$q.notify({color:"negative",icon:"report_problem",message:e})}))},doMainFillTableResult:function(e){this.dataList=e.content,this.pagination.rowsNumber=e.totalElements,this.pagination.rowsPerPage=e.pageable.pageSize,this.pagination.page=e.number+1},doMainEquipmentChangePage:function(e){var a=e.pagination,t=a.page,o=a.rowsPerPage,i=a.sortBy,r=a.descending,s={pageIndex:t-1,pageSize:o,sortBy:i,descending:r,searchVal:this.searchVal};this.getMigrationHistoryList(s)},doSearchByFilter:function(){var e={pageIndex:this.pagination.page-1,pageSize:this.pagination.rowsPerPage,sortBy:this.pagination.sortBy,descending:this.pagination.descending,searchVal:this.searchVal};this.getMigrationHistoryList(e)},doClearSearchVal:function(e){"start"===e?null===this.searchVal.reqStartDate&&(this.searchVal.reqStartDate="",this.doSearchByFilter()):"createdBy"===e?null===this.searchVal.createdBy&&(this.searchVal.createdBy="",this.doSearchByFilter()):null===this.searchVal.reqEndDate&&(this.searchVal.reqEndDate="",this.doSearchByFilter())},getDropdownValue:function(e){"productTypeSearch"===e&&(this.searchVal.productType=this.searchVal.productType.value)},downloadExcel:function(e){var a=this;this.showLoading(),this.$axios.get("".concat("/","migrationHistoryExcelDownload"),{responseType:"arraybuffer",params:{startDate:this.searchVal.reqStartDate,endDate:this.searchVal.reqEndDate,createdBy:this.searchVal.createdBy,sourceCode:this.searchVal.sourceCode,newCode:this.searchVal.newCode,migrationType:this.searchVal.migrationType,productType:this.searchVal.productType}}).then((function(e){a.$q.loading.hide();var t=window.URL.createObjectURL(new Blob([e.data]),{type:""}),o=document.createElement("a");o.href=t,o.style="display: none",o.download="migration_history.xlsx",document.body.appendChild(o),o.click()})).catch((function(e){a.$q.loading.hide(),a.notify({color:"negative",icon:"report_problem",message:e})}))}},beforeMount:function(){this.doInitPage()}},n=s,l=(t("b25d"),t("2877")),c=Object(l["a"])(n,o,i,!1,null,null,null);a["default"]=c.exports},b25d:function(e,a,t){"use strict";var o=t("29c8"),i=t.n(o);i.a}}]);