(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[17],{"3a5f":function(t,e,a){"use strict";var r=a("8380");e["a"]={methods:{showLoading:function(){this.$q.loading.show({spinner:r["a"],spinnerColor:"orange-10",spinnerSize:140,backgroundColor:"purple",messageColor:"black"})},showCheckingLoading:function(){this.$q.loading.show({spinner:r["a"],message:"Checking Excel Data...",spinnerColor:"orange-10",spinnerSize:60,backgroundColor:"purple",messageColor:"white",messageSize:60})},showUploadLoading:function(){this.$q.loading.show({spinner:r["a"],message:"Uploading Excel Data...",spinnerColor:"orange-10",spinnerSize:60,backgroundColor:"purple",messageColor:"white",messageSize:60})}}}},"79ee":function(t,e,a){},a2bd:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",[a("font",{staticClass:"text-bold",attrs:{size:"1",color:"grey"}},[t._v("MASTER DATA "),a("q-icon",{attrs:{name:"double_arrow"}}),t._v(" MASTER PRODUCT SERIES")],1),a("div",{staticStyle:{"margin-bottom":"30px","margin-top":"10px",width:"300px"},attrs:{align:"left"}},[a("font",{staticClass:"text-bold",staticStyle:{"margin-bottom":"10px"},attrs:{size:"5"}},[t._v("MASTER PRODUCT SERIES")]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-20",staticStyle:{width:"32%"}},[a("q-separator",{attrs:{color:"orange-10"}}),a("q-separator",{attrs:{color:"orange-10"}})],1),a("div",{staticClass:"col"},[a("q-separator",{attrs:{color:"purple-10"}}),a("q-separator",{attrs:{color:"purple-10"}})],1)])],1),a("q-card",[a("q-card-section",[a("q-expansion-item",{staticStyle:{"margin-bottom":"10px"},attrs:{label:"SEARCH","header-class":"bg-indigo-2 text-indigo-10",icon:"search"}},[a("div",{staticClass:"row bg-orange-1",staticStyle:{padding:"10px",width:"100%"},attrs:{align:"left"}},[a("div",{staticClass:"col-15",staticStyle:{"margin-right":"10px",width:"17%"}},[a("q-input",{staticClass:"searchform",attrs:{rounded:"",outlined:"",color:"orange-5",label:"Product Series","stack-label":""},model:{value:t.searchVal.series,callback:function(e){t.$set(t.searchVal,"series",e)},expression:"searchVal.series"}})],1),a("div",{staticClass:"col-15",staticStyle:{"margin-right":"10px",width:"17%"}},[a("q-select",{staticClass:"searchform",attrs:{"stack-label":"",rounded:"",outlined:"",color:"orange-5",label:"Manufacturer",options:t.manufacturerCodeListSearch},on:{input:function(e){return t.getBrand("search")}},model:{value:t.searchVal.manufacturer,callback:function(e){t.$set(t.searchVal,"manufacturer",e)},expression:"searchVal.manufacturer"}})],1),a("div",{staticClass:"col-15",staticStyle:{"margin-right":"10px",width:"17%"}},[a("q-select",{staticClass:"searchform",attrs:{"stack-label":"",rounded:"",outlined:"",color:"orange-5",label:"Brand",options:t.filteredBrandListSearch},on:{input:function(e){return t.getBrandValue("search")}},model:{value:t.searchVal.brand,callback:function(e){t.$set(t.searchVal,"brand",e)},expression:"searchVal.brand"}})],1),a("div",{staticClass:"col-15",staticStyle:{"margin-right":"10px",width:"17%"}},[a("q-select",{staticClass:"searchform",attrs:{"stack-label":"",rounded:"",outlined:"",color:"orange-5",label:"Product Type",options:t.productTypeList},on:{input:function(e){return t.getSubTypeSearch()}},model:{value:t.searchVal.productType,callback:function(e){t.$set(t.searchVal,"productType",e)},expression:"searchVal.productType"}})],1),a("div",{staticClass:"col-15",staticStyle:{"margin-right":"10px",width:"17%"}},[a("q-select",{staticClass:"searchform",attrs:{"stack-label":"",rounded:"",outlined:"",color:"orange-5",label:"Sub Type",options:t.subTypeListSearch},on:{input:function(e){return t.getSubTypeValue("search")}},model:{value:t.searchVal.productSubType,callback:function(e){t.$set(t.searchVal,"productSubType",e)},expression:"searchVal.productSubType"}})],1),a("div",{staticClass:"col-15",staticStyle:{"margin-right":"10px",width:"5%"}},[a("q-btn",{attrs:{round:"",color:"indigo-10"},on:{click:function(e){return t.doSearchByFilter()}}},[a("q-icon",{attrs:{name:"search"}}),a("q-tooltip",[t._v("Search")])],1)],1)])]),a("div",{staticStyle:{"max-width":"1000px"}},[a("q-table",{attrs:{data:t.dataList,columns:t.tableColumns,pagination:t.pagination,"table-header-class":"text-indigo-10 bg-indigo-2","row-key":"id",dense:""},on:{"update:pagination":function(e){t.pagination=e},request:t.doMainEquipmentChangePage},scopedSlots:t._u([{key:"body-cell-action",fn:function(e){return a("q-td",{},[a("q-btn-dropdown",{attrs:{rounded:"",size:"sm",color:"indigo-10"}},[a("q-list",[a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""}},[a("q-item-section",[a("q-btn",{attrs:{color:"indigo-6",round:"",size:"sm"},on:{click:function(a){return t.doOpenForm(e.row.pid)}}},[a("q-icon",{attrs:{name:"fas fa-edit"}}),a("q-tooltip",[t._v("Edit")])],1)],1)],1),a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""}},[a("q-item-section",[a("q-btn",{attrs:{color:"indigo-6",round:"",size:"sm"},on:{click:function(a){return t.doToggleStatus(e)}}},[a("q-icon",{attrs:{name:"A"===e.row.recordStatus?"fas fa-stop-circle":"fas fa-play-circle"}}),a("q-tooltip",[t._v(t._s("A"===e.row.recordStatus?"Deactivate":"Activate"))])],1)],1)],1)],1)],1)],1)}},{key:"body-cell-recordStatus",fn:function(t){return a("q-td",{},["A"===t.row.recordStatus?a("div",[a("q-icon",{staticStyle:{"font-size":"20px"},attrs:{name:"done",color:"primary"}})],1):a("div",[a("q-icon",{staticStyle:{"font-size":"20px"},attrs:{name:"clear",color:"negative"}})],1)])}}])})],1)],1)],1),a("q-page-sticky",{attrs:{position:"top-right",offset:[15,30]}},[a("q-fab",{attrs:{color:"orange-7",glossy:"",icon:"keyboard_arrow_down",direction:"down"}},[a("q-fab-action",{attrs:{color:"orange-6","text-color":"white",icon:"add"},nativeOn:{click:function(e){return t.doOpenForm(!1)}}},[a("q-tooltip",[t._v("Add")])],1),a("q-fab-action",{attrs:{color:"orange-6","text-color":"white",icon:"backup"},nativeOn:{click:function(e){t.modalUploadExcel=!0}}},[a("q-tooltip",[t._v("Upload Excel")])],1),a("q-btn",{attrs:{round:"",color:"orange-6","text-color":"white"},nativeOn:{click:function(e){return t.downloadExcel(e)}}},[a("q-icon",{attrs:{name:"fas fa-file-excel"}}),a("q-tooltip",[t._v("Download Excel")])],1)],1)],1),a("q-dialog",{attrs:{persistent:""},on:{"before-hide":function(e){return t.clear()}},model:{value:t.showForm,callback:function(e){t.showForm=e},expression:"showForm"}},[a("q-card",{staticClass:"bg-white",staticStyle:{width:"300px"}},[a("q-bar",{staticClass:"bg-indigo-10 text-white"},[a("strong",[t._v("Product Series")]),a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close"}})],1),a("q-card-section",[a("div",[a("q-input",{staticClass:"text-italic",attrs:{readonly:"","stack-label":"",label:"Series Code"},model:{value:t.formData.pid,callback:function(e){t.$set(t.formData,"pid",e)},expression:"formData.pid"}}),a("q-input",{attrs:{"stack-label":"",label:"Series"},model:{value:t.formData.series,callback:function(e){t.$set(t.formData,"series",e)},expression:"formData.series"}}),a("q-input",{attrs:{"stack-label":"",label:"Description"},model:{value:t.formData.description,callback:function(e){t.$set(t.formData,"description",e)},expression:"formData.description"}}),a("q-select",{attrs:{"stack-label":"",label:"Manufacturer Code",options:t.manufacturerCodeList},on:{input:function(e){return t.getBrand("form")}},model:{value:t.formData.manufacturer,callback:function(e){t.$set(t.formData,"manufacturer",e)},expression:"formData.manufacturer"}}),a("q-select",{attrs:{"stack-label":"",label:"Brand",options:t.filteredBrandList},on:{input:function(e){return t.getBrandValue("form")}},model:{value:t.formData.brand,callback:function(e){t.$set(t.formData,"brand",e)},expression:"formData.brand"}}),a("q-select",{attrs:{"stack-label":"",label:"Product Type",options:t.productTypeList},on:{input:function(e){return t.getSubType()}},model:{value:t.formData.productType,callback:function(e){t.$set(t.formData,"productType",e)},expression:"formData.productType"}}),a("q-select",{attrs:{"stack-label":"",label:"Sub Type",options:t.subTypeList},on:{input:function(e){return t.getSubTypeValue("form")}},model:{value:t.formData.productSubType,callback:function(e){t.$set(t.formData,"productSubType",e)},expression:"formData.productSubType"}}),a("q-input",{attrs:{"stack-label":"",label:"Unit"},model:{value:t.formData.unit,callback:function(e){t.$set(t.formData,"unit",e)},expression:"formData.unit"}})],1),a("br"),a("div",{staticStyle:{"text-align":"right"}},[a("q-btn",{attrs:{round:"",color:"orange-6",size:"small"},nativeOn:{click:function(e){return t.doSave()}}},[a("q-icon",{attrs:{name:"fas fa-save"}}),a("q-tooltip",[t._v("Submit")])],1)],1)])],1)],1),a("q-dialog",{attrs:{persistent:""},on:{"before-hide":function(e){return t.doHideButton()}},model:{value:t.modalUploadExcel,callback:function(e){t.modalUploadExcel=e},expression:"modalUploadExcel"}},[a("q-card",{staticClass:"bg-white"},[a("q-bar",{staticClass:"bg-indigo-10 text-white"},[a("strong",[t._v("Upload Excel File")]),a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close"}})],1),a("q-card-section",[a("a",{attrs:{href:"/statics/template/productSeries.xlsx"}},[t._v("Download Template")])]),a("q-card-section",[a("q-input",{attrs:{type:"file"},on:{input:function(e){t.doAttachFile(e[0])}}}),a("div",{staticStyle:{"margin-top":"20px"},attrs:{align:"right"}},[a("q-btn",{attrs:{round:"",color:"orange-6"},on:{click:function(e){return t.uploadField()}}},[a("q-icon",{attrs:{name:"fas fa-file-upload"}}),a("q-tooltip",[t._v("Upload")])],1)],1)],1)],1)],1)],1)},o=[],i=(a("7f7f"),a("55dd"),a("3a5f")),s={mixins:[i["a"]],data:function(){return{dataList:[],listOfBrand:[],listOfManufacturer:[],manufacturerCodeList:[],manufacturerCodeListSearch:[],modalUploadExcel:!1,productTypeList:[],productTypeListSearch:[],filteredBrandList:[],filteredBrandListSearch:[],subTypeList:[],subTypeListSearch:[],subTypeListResult:[],subTypeForList:"",productSubType:"",fileAttach:{fileName:"",file64:"",equipmentCategory:"Network"},tableColumns:[{name:"pid",label:"Series Code",field:"pid",align:"left",style:"width: 100px",sortable:!0},{name:"series",label:"Series",field:"series",align:"left",style:"width: 100px",sortable:!0},{name:"description",label:"Description",field:"description",align:"left",style:"width: 200px",sortable:!0},{name:"manufacturer",label:"Manufacturer",field:"manufacturer",align:"left",style:"width: 200px",sortable:!0},{name:"brand",label:"Brand",field:"brand",align:"left",style:"width: 200px",sortable:!0},{name:"productType",label:"Product Type",field:"productType",align:"left",style:"width: 200px",sortable:!0},{name:"productSubType",label:"Sub Type",field:"productSubType",align:"left",style:"width: 200px",sortable:!0},{name:"unit",label:"Unit",field:"unit",align:"left",style:"width: 200px",sortable:!0},{name:"recordStatus",label:"Status",field:"recordStatus",align:"left",sortable:!0},{name:"action",label:"Action",align:"center",style:"width: 100px"}],pagination:{sortBy:"id",page:1,rowsPerPage:10,rowsNumber:0,descending:!0},subTypePagination:{sortBy:"id",descending:!1,rowsPerPage:0},searchVal:{series:"",manufacturer:"ALL",brand:"ALL",productType:"ALL",productSubType:"ALL"},showForm:!1,formData:{pid:"AUTO GENERATE",description:"",manufacturer:"",brand:"",productType:"",mode:"create",productSubType:"",unit:""}}},beforeMount:function(){this.doInitPage()},methods:{doInitPage:function(){var t=this;this.showLoading(),this.$axios.get("".concat("/","getProductSeriesInitPage"),{params:{pageIndex:0,pageSize:this.pagination.rowsPerPage,sortBy:this.pagination.sortBy,descending:this.pagination.descending,searchVal:this.searchVal}}).then((function(e){t.$q.loading.hide(),t.doMainFillTableResult(e.data.listOfProductSeries),t.listOfManufacturer=e.data.listOfManufacturer,t.manufacturerCodeList=e.data.listOfManufacturerDropdown,t.manufacturerCodeList=t.manufacturerCodeList.sort(t.compareValue),t.manufacturerCodeListSearch=t.manufacturerCodeList,t.manufacturerCodeListSearch.unshift({label:"ALL",value:"ALL"}),t.productTypeList=e.data.listOfProductTypeDropdown.map((function(t){return{label:t.value.toUpperCase()+" ("+t.cascadeValue.toUpperCase()+")",value:t.value.toUpperCase(),cascadeValue:t.cascadeValue}})),t.productTypeList=t.productTypeList.sort(t.compareValue),t.productTypeListSearch=t.productTypeList,t.productTypeListSearch.unshift({label:"ALL",value:"ALL"})})).catch((function(e){t.$q.loading.hide(),t.$q.notify({color:"negative",icon:"report_problem",message:e})}))},getProductSeriesList:function(t){var e=this;this.showLoading(),this.$axios.get("".concat("/","getProductSeriesList"),{params:t}).then((function(t){e.$q.loading.hide(),e.doMainFillTableResult(t.data)})).catch((function(t){e.$q.loading.hide(),e.$q.notify({color:"negative",icon:"report_problem",message:t})}))},doMainFillTableResult:function(t){this.dataList=t.content,this.pagination.rowsNumber=t.totalElements,this.pagination.rowsPerPage=t.pageable.pageSize,this.pagination.page=t.number+1},doMainEquipmentChangePage:function(t){var e=t.pagination,a=e.page,r=e.rowsPerPage,o=e.sortBy,i=e.descending,s={pageIndex:a-1,pageSize:r,sortBy:o,descending:i,searchVal:this.searchVal};this.getProductSeriesList(s)},doSearchByFilter:function(){var t={pageIndex:this.pagination.page-1,pageSize:this.pagination.rowsPerPage,sortBy:this.pagination.sortBy,descending:this.pagination.descending,searchVal:this.searchVal};this.getProductSeriesList(t)},doOpenForm:function(t){var e=this;!1===t?this.showForm=!0:(this.showLoading(),this.$axios.get("".concat("/","getProductSeriesDetail"),{params:{pid:t}}).then((function(t){e.formData=t.data,e.formData.mode="update",e.showForm=!0,e.$q.loading.hide()})).catch((function(t){e.$q.notify({color:"negative",icon:"report_problem",message:t}),e.$q.loading.hide()})))},doSave:function(){var t=this;this.showLoading(),"AUTO GENERATE"===this.formData.pid&&(this.formData.pid=""),this.$axios.post("".concat("/","saveProductSeries"),this.formData).then((function(e){t.$q.loading.hide(),"Success"===e.data?t.$q.notify({color:"positive",icon:"info",message:"Record successfully saved"}):t.$q.notify({color:"negative",icon:"report_problem",message:e.data}),t.showForm=!1,t.doRefresh()})).catch((function(e){t.$q.loading.hide(),t.$q.notify({color:"negative",icon:"report_problem",message:e})}))},getBrand:function(t){var e=this;if("form"===t){this.formData.manufacturer=this.formData.manufacturer.value;var a=this.listOfManufacturer.filter((function(t){return t.description.indexOf(e.formData.manufacturer)>-1}))[0].brand;if(null!==a){var r=JSON.parse(a);this.filteredBrandList=r.map((function(t){return{label:t.brand.toUpperCase(),value:t.brand.toUpperCase()}}))}else this.filteredBrandList=[],this.formData.brand=""}else if("search"===t)if("ALL"!==this.searchVal.manufacturer.value){this.searchVal.manufacturer=this.searchVal.manufacturer.value;var o=this.listOfManufacturer.filter((function(t){return t.description.indexOf(e.searchVal.manufacturer)>-1}))[0].brand;if(null!==o){var i=JSON.parse(o);this.filteredBrandListSearch=i.map((function(t){return{label:t.brand.toUpperCase(),value:t.brand.toUpperCase()}})),this.filteredBrandListSearch.unshift({label:"ALL",value:"ALL"}),this.searchVal.brand="ALL"}else this.filteredBrandListSearch=[],this.filteredBrandListSearch.unshift({label:"ALL",value:"ALL"}),this.searchVal.brand="ALL"}else this.searchVal.manufacturer=this.searchVal.manufacturer.value,this.filteredBrandListSearch=[],this.filteredBrandListSearch.unshift({label:"ALL",value:"ALL"}),this.searchVal.brand="ALL"},getSubType:function(){var t=this;this.showLoading();var e=this.formData.productType.cascadeValue;this.formData.productType=this.formData.productType.value,this.$axios.get("".concat("/","getSubType"),{params:{productType:this.formData.productType,eqCategory:e}}).then((function(e){""!==e.data?t.subTypeList=e.data.map((function(t){return{label:t.subtype.toUpperCase(),value:t.subtype.toUpperCase()}})):t.subTypeList=[],t.$q.loading.hide()})).catch((function(e){t.$q.notify({color:"negative",icon:"report_problem",message:e}),t.$q.loading.hide()}))},getSubTypeSearch:function(){var t=this;if(this.showLoading(),"ALL"!==this.searchVal.productType.value){var e=this.searchVal.productType.cascadeValue;this.searchVal.productType=this.searchVal.productType.value,this.$axios.get("".concat("/","getSubType"),{params:{productType:this.searchVal.productType,eqCategory:e}}).then((function(e){""!==e.data?(t.subTypeListSearch=e.data.map((function(t){return{label:t.subtype.toUpperCase(),value:t.subtype.toUpperCase()}})),t.subTypeListSearch.unshift({label:"ALL",value:"ALL"}),t.searchVal.productSubType="ALL"):(t.subTypeListSearch=[],t.subTypeListSearch.unshift({label:"ALL",value:"ALL"}),t.searchVal.productSubType="ALL"),t.$q.loading.hide()})).catch((function(e){t.$q.notify({color:"negative",icon:"report_problem",message:e}),t.$q.loading.hide()}))}else this.searchVal.productType=this.searchVal.productType.value,this.subTypeListSearch=[],this.subTypeListSearch.unshift({label:"ALL",value:"ALL"}),this.searchVal.productSubType="ALL",this.$q.loading.hide()},getBrandValue:function(t){"form"===t?this.formData.brand=this.formData.brand.value:"search"===t&&(this.searchVal.brand=this.searchVal.brand.value)},getSubTypeValue:function(t){"search"===t?this.searchVal.productSubType=this.searchVal.productSubType.value:"form"===t&&(this.formData.productSubType=this.formData.productSubType.value)},doToggleStatus:function(t){t.row.recordStatus="I"===t.row.recordStatus?"A":"I",this.formData=t.row,this.formData.mode="update",this.doSave()},doAttachFile:function(t){var e=this,a=new FileReader;this.uploadButton=!0,a.onload=function(a){e.fileAttach.fileName=t.name,e.fileAttach.file64=a.target.result},a.readAsDataURL(t)},uploadField:function(t){var e=this;this.showLoading(),this.$axios.post("".concat("/","uploadSeries"),this.fileAttach).then((function(t){e.modalUploadExcel=!1,e.$q.loading.hide(),e.doInitPage()})).catch((function(t){e.$q.loading.hide(),e.$q.notify({color:"negative",icon:"report_problem",message:t})}))},downloadExcel:function(t){var e=this;this.showLoading(),this.$axios.get("".concat("/","productSeriesDownloadExcel"),{responseType:"arraybuffer",params:{searchVal:this.searchVal}}).then((function(t){e.$q.loading.hide();var a=window.URL.createObjectURL(new Blob([t.data]),{type:""}),r=document.createElement("a");r.href=a,r.style="display: none",r.download="master_product_series.xlsx",document.body.appendChild(r),r.click()})).catch((function(t){e.$q.loading.hide(),e.notify({color:"negative",icon:"report_problem",message:t})}))},compareLabel:function(t,e){var a=t.label.toUpperCase(),r=e.label.toUpperCase(),o=0;return a>r?o=1:a<r&&(o=-1),o},compareValue:function(t,e){var a=t.value.toUpperCase(),r=e.value.toUpperCase(),o=0;return a>r?o=1:a<r&&(o=-1),o},clear:function(){this.formData={pid:"AUTO GENERATE",description:"",manufacturerId:"",brand:"",productTypeSubType:"",mode:"create"}},doRefresh:function(){this.clear(),this.doInitPage()}}},n=s,l=(a("d486"),a("2877")),c=Object(l["a"])(n,r,o,!1,null,null,null);e["default"]=c.exports},d486:function(t,e,a){"use strict";var r=a("79ee"),o=a.n(r);o.a}}]);