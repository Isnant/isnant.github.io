(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{"139e":function(e,t,a){"use strict";var i=a("c7d1"),o=a.n(i);o.a},"3a5f":function(e,t,a){"use strict";var i=a("8380");t["a"]={methods:{showLoading:function(){this.$q.loading.show({spinner:i["a"],spinnerColor:"orange-10",spinnerSize:140,backgroundColor:"purple",messageColor:"black"})},showCheckingLoading:function(){this.$q.loading.show({spinner:i["a"],message:"Checking Excel Data...",spinnerColor:"orange-10",spinnerSize:60,backgroundColor:"purple",messageColor:"white",messageSize:60})},showUploadLoading:function(){this.$q.loading.show({spinner:i["a"],message:"Uploading Excel Data...",spinnerColor:"orange-10",spinnerSize:60,backgroundColor:"purple",messageColor:"white",messageSize:60})}}}},c7d1:function(e,t,a){},fca1:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",[a("font",{staticClass:"text-bold",attrs:{size:"1",color:"grey"}},[e._v("EQUIPMENT "),a("q-icon",{attrs:{name:"double_arrow"}}),e._v(" UPLOAD LOG BATCH")],1),a("div",{staticStyle:{"margin-bottom":"30px",width:"230px"},attrs:{align:"left"}},[a("font",{staticClass:"text-bold",staticStyle:{"margin-bottom":"10px"},attrs:{size:"5"}},[e._v("UPLOAD LOG BATCH")]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-20",staticStyle:{width:"32%"}},[a("q-separator",{attrs:{color:"orange-10"}}),a("q-separator",{attrs:{color:"orange-10"}})],1),a("div",{staticClass:"col"},[a("q-separator",{attrs:{color:"purple-10"}}),a("q-separator",{attrs:{color:"purple-10"}})],1)])],1),a("q-card",[a("q-card-section",[a("q-expansion-item",{staticStyle:{"margin-bottom":"10px"},attrs:{label:"SEARCH","header-class":"bg-indigo-2 text-indigo-10",icon:"search"}},[a("div",{staticClass:"row bg-orange-1",staticStyle:{padding:"10px",width:"100%"},attrs:{align:"left"}},[a("div",{staticClass:"col",staticStyle:{"margin-right":"10px"}},[a("q-input",{staticClass:"searchform",attrs:{rounded:"",outlined:"",color:"orange-8",label:"Batch","stack-label":""},model:{value:e.searchVal.id,callback:function(t){e.$set(e.searchVal,"id",t)},expression:"searchVal.id"}})],1),a("div",{staticClass:"col",staticStyle:{"margin-right":"10px"}},[a("q-input",{staticClass:"searchform",attrs:{rounded:"",outlined:"",color:"orange-8",label:"File Name","stack-label":""},model:{value:e.searchVal.fileName,callback:function(t){e.$set(e.searchVal,"fileName",t)},expression:"searchVal.fileName"}})],1),a("div",{staticClass:"col",staticStyle:{"margin-right":"10px"}},[a("q-select",{staticClass:"searchform",attrs:{rounded:"",outlined:"",color:"orange-8",label:"Equipment Category",options:e.equipmentCategoryList,"stack-label":""},model:{value:e.searchVal.equipmentCategory,callback:function(t){e.$set(e.searchVal,"equipmentCategory",t)},expression:"searchVal.equipmentCategory"}})],1),a("div",{staticClass:"col"},[a("q-input",{staticClass:"searchform",attrs:{rounded:"",outlined:"",readonly:"","stack-label":"",label:"Upload Date"},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{staticStyle:{"margin-top":"12px"},attrs:{name:"event"}},[a("q-popup-proxy",{ref:"qStartDate",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{attrs:{mask:"YYYY/MM/DD"},on:{input:function(t){return e.doStartDate()}},model:{value:e.searchVal.startDate,callback:function(t){e.$set(e.searchVal,"startDate",t)},expression:"searchVal.startDate"}})],1)],1)]},proxy:!0}]),model:{value:e.searchVal.startDate,callback:function(t){e.$set(e.searchVal,"startDate",t)},expression:"searchVal.startDate"}})],1),a("div",{staticClass:"col-25; text-bold",staticStyle:{"margin-right":"10px","margin-top":"25px","margin-left":"10px"}},[e._v("\n            s/d\n          ")]),a("div",{staticClass:"col",staticStyle:{"margin-right":"10px"}},[a("q-input",{staticClass:"searchform",attrs:{rounded:"",outlined:"",readonly:"","stack-label":"",label:""},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{staticStyle:{"margin-top":"12px"},attrs:{name:"event"}},[a("q-popup-proxy",{ref:"qEndDate",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{attrs:{mask:"YYYY/MM/DD",options:e.optionsEndDate},on:{input:function(){return e.$refs.qEndDate.hide()}},model:{value:e.searchVal.endDate,callback:function(t){e.$set(e.searchVal,"endDate",t)},expression:"searchVal.endDate"}})],1)],1)]},proxy:!0}]),model:{value:e.searchVal.endDate,callback:function(t){e.$set(e.searchVal,"endDate",t)},expression:"searchVal.endDate"}})],1),a("div",{staticClass:"col"},[a("q-btn",{attrs:{round:"",color:"indigo-10"},on:{click:function(t){return e.doSearchByFilter()}}},[a("q-icon",{attrs:{name:"search"}}),a("q-tooltip",[e._v("Search")])],1)],1)])]),a("div",{staticStyle:{"max-width":"1200px"}},[a("q-table",{attrs:{data:e.dataList,columns:e.tableColumns,pagination:e.pagination,"table-header-class":"text-indigo-10 bg-indigo-2","row-key":"id",dense:""},on:{"update:pagination":function(t){e.pagination=t},request:e.doMainEquipmentChangePage},scopedSlots:e._u([{key:"body-cell-createdDate",fn:function(t){return a("q-td",{},[e._v("\n            "+e._s(e._f("formatDateTime")(t.row.createdDate))+"\n          ")])}},{key:"body-cell-fileName",fn:function(t){return a("q-td",{},[a("a",{attrs:{href:"#"},on:{click:function(a){return e.downloadExcel(t)}}},[e._v(e._s(t.row.fileName))])])}},{key:"body-cell-recordStatus",fn:function(e){return a("q-td",{},["A"===e.row.recordStatus?a("div",[a("q-icon",{staticStyle:{"font-size":"20px"},attrs:{name:"done",color:"primary"}})],1):a("div",[a("q-icon",{staticStyle:{"font-size":"20px"},attrs:{name:"clear",color:"negative"}})],1)])}}])})],1)],1)],1),a("q-page-sticky",{attrs:{position:"top-right",offset:[15,30]}},[a("q-btn",{attrs:{round:"",color:"orange-6","text-color":"white"},nativeOn:{click:function(t){return e.downloadExcelButtom(t)}}},[a("q-icon",{attrs:{name:"fas fa-file-excel"}}),a("q-tooltip",[e._v("Download Excel")])],1)],1)],1)},o=[],n=(a("20d6"),a("28a5"),a("3a5f")),s=a("c1df"),r=a.n(s),l={mixins:[n["a"]],data:function(){return{dataList:[],areaList:[],regionList:[],filteredRegionList:[],listOfRegion:[],listOfAreaForRegion:[],equipmentCategoryList:["Field","Hub","Network"],tableColumns:[{name:"id",label:"Batch",field:"id",align:"left",style:"width: 100px",sortable:!0},{name:"fileName",label:"File Name",field:"fileName",align:"left",style:"width: 200px",sortable:!0},{name:"equipmentCategory",label:"Equipment Category",field:"equipmentCategory",align:"left",style:"width: 200px",sortable:!0},{name:"createdDate",label:"Upload Date",field:"createdDate",align:"left",style:"width: 200px",sortable:!0},{name:"createdBy",label:"Upload By",field:"createdBy",align:"left",style:"width: 200px",sortable:!0}],regionColumns:[{name:"id",label:"Region Id",field:"id",align:"left",style:"width: 100px",sortable:!0},{name:"regioName",label:"Region Name",field:"regioName",align:"left",style:"width: 200px",sortable:!0},{name:"action",label:"Action",align:"center",style:"width: 100px"}],pagination:{sortBy:"createdDate",descending:!0,page:1,rowsPerPage:10,rowsNumber:0},regionPagination:{sortBy:"region",descending:!1,rowsPerPage:0},searchVal:{id:"",fileName:"",equipmentCategory:"",startDate:"",endDate:""},showForm:!1,formData:{hubCode:"",hubName:"",hubCodeIt:"",areaName:"",regionName:"",city:"",address:"",postalCode:"",phone:"",remarks:""}}},methods:{doInitPage:function(){var e={pageIndex:this.pagination.page-1,pageSize:this.pagination.rowsPerPage,sortBy:this.pagination.sortBy,descending:this.pagination.descending,id:this.searchVal.id,equipmentCategory:this.searchVal.equipmentCategory,fileName:this.searchVal.fileName,startDate:this.searchVal.startDate,endDate:this.searchVal.endDate};this.getLogBatchList(e)},doMainFillTableResult:function(e){this.dataList=e.content,this.pagination.rowsNumber=e.totalElements,this.pagination.rowsPerPage=e.pageable.pageSize,this.pagination.page=e.number+1},getLogBatchList:function(e){var t=this;this.showLoading();var a=localStorage.getItem("user-token"),i=JSON.parse(atob(a.split(".")[1])).authorities;-1===i.findIndex((function(e){return"ROLE_08"===e}))&&this.$router.push("/"),this.$axios.get("".concat("/","getLogBatchList"),{params:e}).then((function(e){t.$q.loading.hide(),t.doMainFillTableResult(e.data)})).catch((function(e){t.$q.loading.hide(),t.$q.notify({color:"negative",icon:"report_problem",message:e})}))},doMainEquipmentChangePage:function(e){var t=e.pagination,a=t.page,i=t.rowsPerPage,o=t.sortBy,n=t.descending,s={pageIndex:a-1,pageSize:i,sortBy:o,descending:n,id:this.searchVal.id,equipmentCategory:this.searchVal.equipmentCategory,fileName:this.searchVal.fileName,startDate:this.searchVal.startDate,endDate:this.searchVal.endDate};this.getLogBatchList(s)},doSearchByFilter:function(){var e={pageIndex:this.pagination.page-1,pageSize:this.pagination.rowsPerPage,sortBy:this.pagination.sortBy,descending:this.pagination.descending,id:this.searchVal.id,equipmentCategory:this.searchVal.equipmentCategory,fileName:this.searchVal.fileName,startDate:this.searchVal.startDate,endDate:this.searchVal.endDate};this.getLogBatchList(e)},doOpenForm:function(e){void 0!==e?(this.formData=JSON.parse(JSON.stringify(e.row)),this.vDisable=!0):this.clear(),this.showForm=!0},doSave:function(){var e=this;this.$axios.post("".concat("/","saveHubCode"),this.formData).then((function(t){e.$q.loading.hide(),e.$q.notify({color:"positive",icon:"info",message:"Record successfully saved"}),e.showForm=!1,e.doRefresh()})).catch((function(t){e.$q.loading.hide(),e.$q.notify({color:"negative",icon:"report_problem",message:t}),e.showForm=!1,e.doRefresh()}))},doToggleStatus:function(e){e.row.recordStatus="I"===e.row.recordStatus?"A":"I",this.formData=e.row,this.doSave()},getRegion:function(){var e=this;this.formData.areaName=this.formData.areaName.value;var t=this.listOfAreaForRegion.filter((function(t){return t.areaName.indexOf(e.formData.areaName)>-1}))[0].region;if(null!==t){var a=JSON.parse(t);this.filteredRegionList=a.map((function(e){return{label:e.region.toUpperCase(),value:e.region.toUpperCase()}}))}else this.filteredRegionList=[],this.formData.region=""},doRegion:function(){this.formData.regionName=this.formData.regionName.value},doRefresh:function(){this.clear(),this.doInitPage()},doDownload:function(e){var t=document.createElement("a");t.setAttribute("href",e.row.fileContent),t.setAttribute("download",e.row.fileName),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)},downloadExcel:function(e){var t=this;this.showLoading(),this.$axios.get("".concat("/","getLogBatch"),{params:{id:e.row.id}}).then((function(e){t.$q.loading.hide();var a=document.createElement("a");a.setAttribute("href",e.data.fileContent),a.setAttribute("download",e.data.fileName),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a)})).catch((function(e){t.$q.loading.hide(),t.notify({color:"negative",icon:"report_problem",message:e})}))},downloadExcelButtom:function(e){var t=this;this.$q.loading.show(),this.$axios.get("".concat("/","logBatchExcelDownload"),{responseType:"arraybuffer"}).then((function(e){t.$q.loading.hide();var a=window.URL.createObjectURL(new Blob([e.data]),{type:""}),i=document.createElement("a");i.href=a,i.style="display: none",i.download="Log Batch - Excel Download.xlsx",document.body.appendChild(i),i.click()})).catch((function(e){t.$q.loading.hide(),t.notify({color:"negative",icon:"report_problem",message:e})}))},doStartDate:function(){this.$refs.qStartDate.hide()},optionsEndDate:function(e){return e>=r()(this.searchVal.startDate).format("YYYY/MM/DD")},clear:function(){this.formData={hubCode:"",hubName:"",hubCodeIt:"",areaName:"",regionName:"",city:"",address:"",postalCode:"",phone:"",remarks:""},this.vDisable=!1}},beforeMount:function(){this.doInitPage()}},c=l,d=(a("139e"),a("2877")),h=Object(d["a"])(c,i,o,!1,null,null,null);t["default"]=h.exports}}]);